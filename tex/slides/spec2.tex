% Note, [fragile] is needed when using juliaconsole
\begin{frame}[fragile,t]{Specifications}

\phantom{}

Let's define the following \textit{specification} over a trajectory $\tau$:
\begin{equation*}
    \psi(\tau) = \lozenge\big( s_t > 0 \big) \tag*{\textit{``Eventually $(\lozenge)$, the state will be greater than zero.''}}
\end{equation*}

\begin{footnotesize}
\begin{juliaconsole}
using SignalTemporalLogic
τ = [-1.0, -3.2, 2.0, 1.5, 3.0, 0.5, -0.5, -2.0, -4.0, -1.5];
ψ = @formula ◊(sₜ -> sₜ > 0);
ψ(τ)
\end{juliaconsole}
\end{footnotesize}

\begin{tikzpicture}[remember picture, overlay]
    \begin{pgfonlayer}{top}
    \node[anchor=south east] at ($(current page.south east)+(0.5cm,0)$) {
        \begin{jlcode}
            p = let
                times = collect(1:10)
                τ = [-1.0, -3.2, 2.0, 1.5, 3.0, 0.5, -0.5, -2.0, -4.0, -1.5];
        
                xmin, xmax, ymin, ymax = 1, 10, -5, 4
                ax = Axis(xmin=xmin, xmax=xmax, ymin=ymin, ymax=ymax, width="9cm", height="4.5cm")
                ax.xlabel = "Time"
                ax.ylabel = L"s"
                # ax.title = raw"Signal $\tau$"
                # ax.style = raw"title style={font=\footnotesize}"
        
                # Used to add phantom right yaxis for better centering
                axr = deepcopy(ax)
                axr.style = raw", axis y line*=right, axis x line=none, yticklabel={\phantom{\pgfmathprintnumber{\tick}}}"
                axr.ylabel = "\\phantom{$(ax.ylabel)}"
                push!(axr, Plots.Command(""))
        
                push!(ax, Plots.Linear(times, τ, style="solid, mark=*, gray, line width=1pt, mark options={fill=gray!50, draw=gray}, mark size=2pt"))
                push!(ax, Plots.Linear([xmin, xmax], [0, 0], style="dotted, mark=none, gray, line width=1pt"))
                [axr, ax]
            end
            plot(p)
        \end{jlcode}
        \plot{fig/jl_spec2}
    };
    \end{pgfonlayer}
\end{tikzpicture}

{\footnotesize\jlv{τ # \tau<TAB>}}

{\footnotesize\jlv{ψ # \psi<TAB>}}

{\footnotesize\jlv{◊ # \lozenge<TAB>}}

\end{frame}