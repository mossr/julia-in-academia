\begin{jlcode}
    p = let
        res = BSON.load("../data/cas_policy.bson")
        grid = res[:grid]
        Q = res[:Q]
        agent = InterpAgent(grid, Q)
        env = CollisionAvoidance(Ds=Normal(0, 3))
        sensor = IdealSensor()
        cas = System(agent, env, sensor)

        Random.seed!(1)
        τ = rollout(cas, d=41)

        ax = cas_axis()
        plot_cas_traj!(ax, τ, color="pastelGreen")
        ax.xlabel = "Time (s)"
        ax.style *= ", xtick={0, 10, 20, 30, 40}, xticklabels={\\num{41}, \\num{31}, \\num{21}, \\num{11}, \\num{1}}, xtick pos=left, ytick pos=left"
        ax.height = "4cm"
        ax.width = "4cm"
        ax.title = "Aircraft Collision Avoidance"
        TikzPicture(PGFPlots.tikzCode(ax), options="baseline=(current bounding box.center)")
    end
    plot(p)
\end{jlcode}
\plotlater{fig/cas_system}

% Note, [fragile] is needed when using juliaconsole
\begin{frame}[fragile,t]{Aircraft Collision Avoidance}

{\small\begin{table} % problem specs
\begin{adjustbox}{width=\columnwidth}
\begin{tabular}[t]{cll}
    \toprule
    System & Property & Implementation \\
    \midrule
    \onslide<2->{\input{fig/cas_system}}
    &
    \onslide<3->{\begin{tabular}{@{}l@{}} \textit{``Ensure at least 50 meters relative} \\ \textit{altitude between 40 and 41 seconds''} \\ $S(s_t)$: $|h_t| \ge 50$ \\ $\psi = \square_{[40,41]} S$\end{tabular}}
    & 
    \onslide<4->{\begin{tabular}{@{}l@{}}
    \small \jlv{S = @formula s->abs(s[1])≥50} \\
    \small \jlv{ψ = @formula □(40:41, S)}
    \end{tabular}} \\
    \bottomrule
\end{tabular}
\end{adjustbox}
\end{table}}

\end{frame}
